<mopup:PopupPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                 xmlns:local="clr-namespace:Vakilaw.MarkupExtensions"
                 xmlns:mopup="clr-namespace:Mopups.Pages;assembly=Mopups"
                 xmlns:vm="clr-namespace:Vakilaw.ViewModels"
                 x:Class="Vakilaw.Views.Popups.AddCasePopup" BackgroundColor="#80000000" FlowDirection="RightToLeft">

    <mopup:PopupPage.Content>
        <Border
            Padding="10"
            StrokeShape="RoundRectangle 12"
            BackgroundColor="#1b263b"
            HorizontalOptions="Center"
            VerticalOptions="Center"
            WidthRequest="340"
            MaximumHeightRequest="600">
            <!-- Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø­Ø¯Ø§Ú©Ø«Ø± Ø§Ø±ØªÙØ§Ø¹ -->

            <!-- ScrollView Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ -->
            <ScrollView>
                <VerticalStackLayout Padding="20" Spacing="15">
                    <Label Text="âž• Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ø¬Ø¯ÛŒØ¯"
                           FontAttributes="Bold"
                           FontSize="Medium"
                           HorizontalOptions="Center" />

                    <Label TextColor="White">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="Ù†Ø§Ù… Ù…ÙˆÚ©Ù„: " FontFamily="IRANSansWeb"/>
                                <Span Text="{Binding ClientName}" FontFamily="IRANSansWeb" FontAttributes="Bold" TextColor="Gold"/>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>

                    <Entry FontFamily="IRANSansWeb" Placeholder="Ø¹Ù†ÙˆØ§Ù† Ù¾Ø±ÙˆÙ†Ø¯Ù‡" PlaceholderColor="DarkGray" Text="{Binding Title}" />
                    <Entry FontFamily="IRANSansWeb" Placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù¾Ø±ÙˆÙ†Ø¯Ù‡" PlaceholderColor="DarkGray" Keyboard="Numeric" Text="{Binding CaseNumber}" />
                    <Entry FontFamily="IRANSansWeb" Placeholder="Ù†Ø§Ù… Ø¯Ø§Ø¯Ú¯Ø§Ù‡ Ùˆ Ø´Ø¹Ø¨Ù‡ Ø±Ø³ÛŒØ¯Ú¯ÛŒ" PlaceholderColor="DarkGray" Text="{Binding CourtName}" />
                    <Entry FontFamily="IRANSansWeb" Placeholder="Ù†Ø§Ù… Ù‚Ø§Ø¶ÛŒ" PlaceholderColor="DarkGray" Text="{Binding JudgeName}" />

                    <Entry Text="{Binding StartDate}" FontFamily="IRANSansWeb"
                           Placeholder="{local:Loc CasePlaceHolderStartDate}" PlaceholderColor="DarkGray"/>

                    <Picker Title="Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±ÙˆÙ†Ø¯Ù‡" FontFamily="IRANSansWeb"
                            SelectedItem="{Binding Status, Mode=TwoWay}"
                            TitleColor="DarkGray">
                        <Picker.ItemsSource>
                            <x:Array Type="{x:Type x:String}">
                                <x:String>Ø¯Ø±Ø­Ø§Ù„ Ø±Ø³ÛŒØ¯Ú¯ÛŒ</x:String>
                                <x:String>Ù…Ø®ØªÙˆÙ…Ù‡</x:String>
                            </x:Array>
                        </Picker.ItemsSource>
                    </Picker>

                    <Entry Text="{Binding EndDate}" IsEnabled="{Binding EndDateIsEnabled}" FontFamily="IRANSansWeb"
                           Placeholder="{local:Loc CasePlaceHolderEndDate}" PlaceholderColor="DarkGray"/>

                    <Border StrokeShape="RoundRectangle 5" StrokeThickness="3" Stroke="GhostWhite">
                        <Editor FontFamily="IRANSansWeb" Placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª ..." PlaceholderColor="DarkGray"
                                Text="{Binding Description}" AutoSize="TextChanges" MaxLength="2000"
                                BackgroundColor="WhiteSmoke" TextColor="Black" HeightRequest="100"/>
                    </Border>

                    <!-- Ø§Ù†ØªØ®Ø§Ø¨ Ù¾ÛŒÙˆØ³Øªâ€ŒÙ‡Ø§ -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Ù¾ÛŒÙˆØ³Øª Ù‡Ø§:" FontAttributes="Bold" TextColor="White"/>
                        <Button Text="ðŸ“Ž Ø§ÙØ²ÙˆØ¯Ù† ÙØ§ÛŒÙ„" 
                                Command="{Binding AddAttachmentCommand}"
                                FontFamily="IRANSansWeb"
                                BackgroundColor="DodgerBlue" 
                                TextColor="White"
                                FontAttributes="Bold"/>

                        <CollectionView ItemsSource="{Binding Attachments}" MaximumHeightRequest="120" VerticalScrollBarVisibility="Always">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Padding="5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <!-- Ø¯Ú©Ù…Ù‡ Ø­Ø°Ù Ø³Ù…Øª Ú†Ù¾ -->
                                            <ColumnDefinition Width="*"/>
                                            <!-- Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ù…ÛŒØ§Ù†Ù‡ -->
                                        </Grid.ColumnDefinitions>
                                        <Button Text="âŒ" Grid.Column="0"
                                                Command="{Binding Source={RelativeSource AncestorType={x:Type vm:AddCasePopupViewModel}}, Path=RemoveAttachmentCommand}" 
                                                CommandParameter="{Binding .}" 
                                                BackgroundColor="Transparent" TextColor="Red"/>
                                        <Label Text="{Binding FileName}" TextColor="Gold" VerticalOptions="Center" Grid.Column="1"/>
                                    </Grid>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </VerticalStackLayout>

                    <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
                        <Button Text="Ø«Ø¨Øª Ù¾Ø±ÙˆÙ†Ø¯Ù‡" Command="{Binding SaveCommand}" FontFamily="IRANSansWeb" FontAttributes="Bold" BackgroundColor="ForestGreen" TextColor="White"/>
                        <Button Text="Ø§Ù†ØµØ±Ø§Ù" Command="{Binding CancelCommand}" FontFamily="IRANSansWeb" FontAttributes="Bold" BackgroundColor="Crimson" TextColor="White"/>
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </ScrollView>
        </Border>
    </mopup:PopupPage.Content>
</mopup:PopupPage>